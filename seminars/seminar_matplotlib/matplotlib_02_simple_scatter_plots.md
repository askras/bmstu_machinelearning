---
jupyter:
  jupytext:
    text_representation:
      extension: .md
      format_name: markdown
      format_version: '1.3'
      jupytext_version: 1.16.4
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

# Простые диаграммы рассеяния


Одним из часто используемых типов графиков являются простые диаграммы рассеяния, которые на линейные графики.
Только в них точки не соединяются между собой и представлены по отдельности в виде точек, кругов или других фигур.


Начнем с импорта необходимых пакетов и настройки блокнота для построения графиков:

```python
import matplotlib.pyplot as plt
import numpy as np

%matplotlib inline
plt.style.use('default')
```

## Построение диаграмм рассеяния с помощью функции `plt.plot`

В предыдущем разделе было показано как использовать `plt.plot` и `ax.plot` для создания линейных графиков.
Оказывается, эта же функция может создавать и диаграммы рассеяния:

```python jupyter={"outputs_hidden": false}
x = np.linspace(0, 10, 30)
y = np.sin(x)

plt.plot(x, y, 'o', color='black');
```

Третий аргумент в вызове функции задает маркер, используемый для построения графика. 
Для задания стиля маркера имеется целый набор коротких строковых кодов. 
Полный список доступных маркеров можно увидеть в документации `plt.plot` или в онлайн-документации Matplotlib. 
Большинство возможностей достаточно интуитивно понятны, покажем здесь несколько наиболее распространенных:

```python jupyter={"outputs_hidden": false}
rng = np.random.RandomState(0)
for marker in ['o', '.', ',', 'x', '+', 'v', '^', '<', '>', 's', 'd']:
    plt.plot(rng.rand(5), rng.rand(5), marker,
             label=f'marker={marker}')
plt.legend(numpoints=1)
plt.xlim(0, 1.8);
```

Для построения точек вместе с соединяющей их линией, коды маркеров можно использовать вместе с кодами линий и цветов:

```python jupyter={"outputs_hidden": false}
plt.plot(x, y, '-ok');
```

Дополнительные именованные аргументы `plt.plot` определяют широкий спектр свойств линий и маркеров:

```python jupyter={"outputs_hidden": false}
plt.plot(x, y, '-p', color='gray',
         markersize=15, 
         linewidth=4,
         markerfacecolor='white',
         markeredgecolor='gray',
         markeredgewidth=2
);
```

Такая гибкость функции `plt.plot` обеспечивает широкий спектр возможных вариантов визуализации.
Полное описание доступных опций смотрите в документации `plt.plot`.


## Построение диаграмм рассеяния с помощью `plt.scatter`

Вторым, более мощным методом создания диаграмм рассеяния является функция `plt.scatter`:

```python jupyter={"outputs_hidden": false}
plt.scatter(x, y, marker='o');
```

Основное отличие `plt.scatter` от `plt.plot` заключается в том, что его можно использовать для создания диаграмм рассеяния, где свойства каждой отдельной точки (размер, цвет грани, цвет ребра и т. д.) можно индивидуально контролировать или сопоставлять с данными.

Давайте покажем это, создав диаграмму случайного рассеяния с точками разных цветов и размеров.
Чтобы лучше увидеть перекрывающиеся результаты, будем использовать ключевое слово `alpha` для настройки уровня прозрачности:

```python jupyter={"outputs_hidden": false}
rng = np.random.RandomState(42)
x = rng.randn(100)
y = rng.randn(100)
colors = rng.rand(100)
sizes = 1000 * rng.rand(100)

plt.scatter(x, y, 
            c=colors, 
            s=sizes, 
            alpha=0.3,
            cmap='viridis'
)
plt.colorbar();  #  отображаем цветовую шкалу
```

Обратите внимание, что аргумент цвета автоматически сопоставляется с цветовой шкалой (которую отображается с помощью команды `colorbar()`), а размеры указываются в пикселах.
Таким образом, цвет и размер точек можно использовать для передачи информации на графике, чтобы визуализировать многомерные данные.


В качестве примера, используем набор данных Iris из пакета Scikit-Learn, где каждый образец представляет собой измерения размеров лепестков и чашелистиков одного из трех сортов ириса:

```python jupyter={"outputs_hidden": false}
from sklearn.datasets import load_iris
iris = load_iris()
features = iris.data.T

plt.scatter(features[0], features[1], alpha=0.2,
            s=100*features[3], 
            c=iris.target, 
            cmap='viridis')
plt.xlabel(iris.feature_names[0])
plt.ylabel(iris.feature_names[1]);
```

Как видим, эта диаграмма рассеяния дала возможность одновременно исследовать четыре различных признака данных:
координаты точки (x, y) соответствуют длине и ширине чашелистика, размер точки пропорционален ширине лепестка, а цвет кодирует сорт цветка.
Подобные многоцветные и многофункциональные диаграммы рассеяния могут быть полезны как для исследования, так и для представления данных.


## Сравнение функций `plt.plot` и `plt.scatter`: примечание относительно производительности

При небольших объемах данных это не играет роли, но при наборах данных, превышающих несколько тысяч точек, функция `plt.plot` может оказаться намного эффективнее `plt.scatter`. 
Причина в том, что `plt.scatter` имеет возможность отображать разный размер и/или цвет для каждой точки, а поэтому визуализатор должен выполнить дополнительную работу по построению каждой точки по отдельности.
С другой стороны, в `plt.plot` точки всегда по сути являются клонами друг друга, поэтому работа по определению внешнего вида точек выполняется только один раз для всего набора данных.
Для больших наборов данных разница между этими двумя методами может привести к существенно разной производительности, и по этой причине для больших наборов данных следует предпочесть `plt.plot`.

```python

```
